INCLUDE_DIRECTORIES(/usr/include/arpack++)
INCLUDE_DIRECTORIES(/usr/arpack++)

#project name
PROJECT(LILIANTESTS)

cmake_minimum_required(VERSION 2.8)

if(COMMAND cmake_policy)
  cmake_policy(SET CMP0003 NEW)
endif(COMMAND cmake_policy)

SET(BUILD_SHARED_LIBS ON)	#was ON
SET(CMAKE_BUILD_TYPE Release)

## where are user-specific cmake modules
SET(CMAKE_MODULE_PATH $ENV{CMAKE_MODULE_PATH})
SET(BIAS_DIR $ENV{BIAS_ROOT_DIR})
#set (ARPACK_DIR $ENV{OPENCV_DIR})

OPTION(USE_BIAS ON)

SET(USE_BIAS ON)

IF(USE_BIAS)
FIND_PACKAGE(BIAS)
IF(BIAS_FOUND)
  INCLUDE(${BIAS_USE_FILE})
ELSE(BIAS_FOUND)
  MESSAGE(SEND_ERROR "BIAS lib not found.")
ENDIF(BIAS_FOUND)
ENDIF(USE_BIAS)


IF(USE_BIAS)
INCLUDE_DIRECTORIES(${BIAS_INCLUDE_DIR})
LINK_DIRECTORIES( ${BIAS_LINK_DIRECTORIES})
MESSAGE(Bias inc dir: ${BIAS_INCLUDE_DIR})
MESSAGE(Bias link dir: ${BIAS_INCLUDE_DIR})
ENDIF(USE_BIAS)
  
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${BIAS_CXX_FLAGS}")
SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS}  ${BIAS_C_FLAGS}")

# source files of library "LineMatchingLib" to be created
SET(LineMatching_SRCS
    PairwiseLineMatching.cpp
    LineDescriptor.cpp
    EDLineDetector.cpp
    LineMatcher.cpp
)
# header files to be installed
SET(LineMatching_HEADER
    PairwiseLineMatching.hh
    LineDescriptor.hh
    EDLineDetector.hh
    LineStructure.hh
    LineMatcher.hh
)


ADD_LIBRARY(LineMatching
            ${LineMatching_SRCS}
            ${LineMatching_HEADER})
TARGET_LINK_LIBRARIES(LineMatching /usr/lib/libarpack++.so /usr/lib/libarpack.so.2.0.0 /usr/lib/libsuperlu.so.3.0.0 ${BIAS_LIBRARIES} ${OpenCV_LIBS}) #/data1/lz/LilianTests/ARPACKLAB/SuperLU/libsuperlu.so


ADD_EXECUTABLE(TestLineMatchingAlgorithm TestLineMatchingAlgorithm.cpp)
TARGET_LINK_LIBRARIES(TestLineMatchingAlgorithm   LineMatching)


